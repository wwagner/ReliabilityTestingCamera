# ============================================================================
# Reliability Testing Camera Configuration
# ============================================================================
# This file configures all camera and processing parameters
# Settings are READ-ONLY and loaded at application startup
# Restart the application after modifying this file
#
# For more information, see PROJECT.md and PHASE documentation
# ============================================================================

[Camera]
# ============================================================================
# Event Camera Bias Settings
# ============================================================================
# These values control the analog biases in the event camera sensor
# Adjust these values to tune the camera's sensitivity and behavior
# Note: Ranges vary by bias type - see individual comments
# Default values are suitable for most applications
# ============================================================================

bias_diff = 0         # Event detection threshold (-25 to 23)
                      # Controls the sensitivity of event detection
                      # Recommended: 0 (do not change unless necessary)
                      # Lower values = more sensitive (more noise)
                      # Higher values = less sensitive (miss events)

bias_diff_on = 20     # ON event threshold (-85 to 140)
                      # Controls when brightness increase triggers an event
                      # Default: 20
                      # Lower values = more ON events
                      # Higher values = fewer ON events

bias_diff_off = 20    # OFF event threshold (-35 to 190)
                      # Controls when brightness decrease triggers an event
                      # Default: 20
                      # Lower values = more OFF events
                      # Higher values = fewer OFF events

bias_fo = 0           # Photoreceptor follower (-35 to 55)
                      # Output buffer strength
                      # Default: 0
                      # Affects overall pixel responsiveness

bias_hpf = 100        # High-pass filter (0 to 120)
                      # Removes DC component from signal
                      # Default: 100
                      # Higher values = stronger filtering
                      # Helps reduce background noise

bias_refr = 0         # Refractory period (-20 to 235)
                      # Prevents rapid re-triggering of the same pixel
                      # Default: 0
                      # Higher values = longer dead time after event
                      # Reduces noise but may miss rapid changes

# ============================================================================
# Frame Generation Settings
# ============================================================================
# Controls how events are accumulated into frames
# ============================================================================

accumulation_time_us = 10000   # Event accumulation period in microseconds
                               # This is how long events are collected before creating a frame
                               # Default: 10000 μs = 10 ms (~100 FPS)
                               #
                               # Common values:
                               #   1000 μs   = 1 ms (1000 FPS - very fast, noisy)
                               #   5000 μs   = 5 ms (200 FPS - fast)
                               #   10000 μs  = 10 ms (100 FPS - balanced) ← DEFAULT
                               #   20000 μs  = 20 ms (50 FPS - smooth)
                               #   33000 μs  = 33 ms (30 FPS - very smooth)
                               #   100000 μs = 100 ms (10 FPS - maximum smoothing)
                               #
                               # For reliability testing:
                               #   - Lower values show more temporal detail
                               #   - Higher values reduce noise
                               #   - Recommended: 10000-33000 μs

# ============================================================================
# Trail Filter Settings (Optional)
# ============================================================================
# Filters out transient events (optional feature)
# Useful for reducing motion blur and noise
# ============================================================================

trail_filter_enabled = 1     # Enable trail filter (0=off, 1=on)
                             # Default: 0 (disabled)
                             # Enable if you see excessive motion trails

trail_filter_type = 2        # Filter type:
                             # 0 = TRAIL - Basic trail filtering
                             # 1 = STC_CUT_TRAIL - Cut trailing events
                             # 2 = STC_KEEP_TRAIL - Keep stable events (recommended)
                             # Default: 2

trail_filter_threshold = 20000  # Threshold in microseconds
                               # Events older than this are filtered
                               # Default: 10000 μs (10 ms)

# ============================================================================
# Binary Image Mode Settings
# ============================================================================
# Specifies which two bits of the 8-bit image to extract and display
# This is the key feature for binary image reliability testing
# ============================================================================

binary_bit_1 = 0      # First bit position (0-7)
                      # Default: 0 (bit 0 = value 1)
                      # Bit positions (value when set):
                      #   Bit 0 = 1    ← DEFAULT
                      #   Bit 1 = 2
                      #   Bit 2 = 4
                      #   Bit 3 = 8
                      #   Bit 4 = 16
                      #   Bit 5 = 32
                      #   Bit 6 = 64
                      #   Bit 7 = 128

binary_bit_2 = 7      # Second bit position (0-7)
                      # Default: 7 (bit 7 = value 128)
                      # Combined default extracts bits 0 and 7
                      # Result: pixels with values 1, 128, or 129 appear white

# ============================================================================
# Anti-Flicker Settings (Optional)
# ============================================================================
# Reduces flickering from artificial lighting
# Useful when testing under LED or fluorescent lights
# ============================================================================

antiflicker_enabled = 0      # Enable anti-flicker (0=off, 1=on)
                             # Default: 0 (disabled)
                             # Enable if you see 50/60 Hz flickering

antiflicker_freq_hz = 60     # Flicker frequency in Hz
                             # 50 Hz for European/Asian lights
                             # 60 Hz for US/Canadian lights
                             # Default: 60

antiflicker_duty_cycle = 50  # Duty cycle percentage (0-100)
                             # Default: 50
                             # Adjust if default doesn't remove flicker

# ============================================================================
# Event Rate Control (ERC) Settings (Optional)
# ============================================================================
# Controls the maximum event rate per pixel
# Useful for preventing sensor saturation
# ============================================================================

erc_enabled = 0              # Enable ERC (0=off, 1=on)
                             # Default: 0 (disabled)
                             # Enable if sensor is saturating

erc_period_us = 100          # ERC period in microseconds
                             # Default: 100 μs
                             # Minimum time between events for same pixel

# ============================================================================
# Region of Interest (ROI) Settings (Optional)
# ============================================================================
# Restricts processing to a specific region
# Useful for focusing on specific areas during testing
# ============================================================================

roi_enabled = 0              # Enable ROI (0=off, 1=on)
                             # Default: 0 (disabled - full frame)

roi_x = 0                    # ROI top-left X coordinate
roi_y = 0                    # ROI top-left Y coordinate
roi_width = 1280             # ROI width in pixels (full width)
roi_height = 720             # ROI height in pixels (full height)

# ============================================================================
# Storage Settings
# ============================================================================
# Defines where captured images and exported data are saved
# ============================================================================

# capture_directory = C:\Users\wolfw\OneDrive\Desktop\ReliabilityTesting
                    # Directory for saving:
                    # - Captured images (PNG)
                    # - Image metadata (JSON)
                    # - Scattering statistics (CSV)
                    # - Scattering heatmaps (PNG)
                    # All files are timestamped automatically
                    #
                    # DEFAULT BEHAVIOR (if commented out or empty):
                    # Images will be saved to the same folder as the application executable
                    # This is recommended for portable deployments
                    #
                    # To save to a different location, uncomment and set the path:
                    # capture_directory = C:\Users\YourName\Desktop\ReliabilityTesting

# ============================================================================
# Runtime Performance Settings
# ============================================================================
# Advanced settings for performance tuning
# Generally do not need to be changed
# ============================================================================

[Runtime]
max_event_age_us = 100000           # Maximum event age in microseconds
                                    # Events older than this are discarded
                                    # Default: 100000 μs (100 ms)
                                    # Prevents processing of stale data

simulation_frame_delay_ms = 33      # Simulation mode frame delay
                                    # Used when no camera is connected
                                    # Default: 33 ms (~30 FPS)

# ============================================================================
# Common Configuration Scenarios
# ============================================================================
#
# Low Noise Testing:
#   accumulation_time_us = 33000
#   bias_hpf = 120
#   trail_filter_enabled = 1
#
# High Temporal Resolution:
#   accumulation_time_us = 5000
#   bias_diff_on = 15
#   bias_diff_off = 15
#
# Stable Long-Term Monitoring:
#   accumulation_time_us = 20000
#   bias_hpf = 100
#   erc_enabled = 1
#
# Indoor LED Lighting:
#   antiflicker_enabled = 1
#   antiflicker_freq_hz = 60
#
# ============================================================================
# End of Configuration
# ============================================================================
